{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\38598\\\\Documents\\\\React\\\\asbp-react-auth-app\\\\src\\\\components\\\\Auth\\\\AuthForm.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { useState, useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport ErrorModal from '../';\nimport classes from './AuthForm.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthForm = () => {\n  _s();\n  const history = useHistory();\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n  const authCtx = useContext(AuthContext);\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState();\n  const switchAuthModeHandler = () => {\n    setIsLogin(prevState => !prevState);\n  };\n  const submitHandler = event => {\n    event.preventDefault();\n    const enteredEmail = emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n    setIsLoading(true);\n    let url;\n    if (isLogin) {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDVumzBi9pham3Oy5EyGdMpUhjY0sY1Lng';\n    } else {\n      url = 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDVumzBi9pham3Oy5EyGdMpUhjY0sY1Lng';\n    }\n    fetch(url, {\n      method: 'POST',\n      body: JSON.stringify({\n        email: enteredEmail,\n        password: enteredPassword,\n        returnSecureToken: true\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    }).then(res => {\n      setIsLoading(false);\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then(data => {\n          let errorMessage = 'Authentication failed!';\n          if (data && data.error && data.error.message) {\n            errorMessage = data.error.message;\n          }\n          throw new Error(errorMessage);\n        });\n      }\n    }).then(data => {\n      const expirationTime = new Date(new Date().getTime() + +data.expiresIn * 1000);\n      authCtx.login(data.idToken, expirationTime);\n      history.replace('/');\n    }).catch(err => {\n      if (err) {\n        setError({\n          title: 'Error!',\n          message: err.message\n        });\n        return;\n      }\n      //alert(err.message);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: [error && /*#__PURE__*/_jsxDEV(ErrorModal, {\n      message: error.message,\n      title: error.message,\n      onConfirm: errorHandler\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      className: classes.auth,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: isLogin ? 'Login' : 'Sign Up'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitHandler,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"email\",\n            children: \"Your Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            id: \"email\",\n            required: true,\n            ref: emailInputRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.control,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"password\",\n            children: \"Your Password\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            id: \"password\",\n            required: true,\n            ref: passwordInputRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: classes.actions,\n          children: [!isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n            children: isLogin ? 'Login' : 'Create Account'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 26\n          }, this), isLoading && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Sending request...\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: classes.toggle,\n            onClick: switchAuthModeHandler,\n            children: isLogin ? 'Create new account' : 'Login with existing account'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthForm, \"gfw0pu60ar7o8tVfpYljgL50QiM=\", false, function () {\n  return [useHistory];\n});\n_c = AuthForm;\nexport default AuthForm;\nvar _c;\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"names":["React","useState","useRef","useContext","useHistory","AuthContext","ErrorModal","classes","AuthForm","history","emailInputRef","passwordInputRef","authCtx","isLogin","setIsLogin","isLoading","setIsLoading","error","setError","switchAuthModeHandler","prevState","submitHandler","event","preventDefault","enteredEmail","current","value","enteredPassword","url","fetch","method","body","JSON","stringify","email","password","returnSecureToken","headers","then","res","ok","json","data","errorMessage","message","Error","expirationTime","Date","getTime","expiresIn","login","idToken","replace","catch","err","title","errorHandler","auth","control","actions","toggle"],"sources":["C:/Users/38598/Documents/React/asbp-react-auth-app/src/components/Auth/AuthForm.js"],"sourcesContent":["import React from 'react';\nimport { useState, useRef, useContext } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport AuthContext from '../../store/auth-context';\nimport ErrorModal from '../'\n\nimport classes from './AuthForm.module.css';\n\nconst AuthForm = () => {\n  const history = useHistory();\n  const emailInputRef = useRef();\n  const passwordInputRef = useRef();\n\n  const authCtx= useContext(AuthContext);\n\n  const [isLogin, setIsLogin] = useState(true);\n  const [isLoading, setIsLoading]=useState(false);\n  const [error, setError] = useState();\n\n  const switchAuthModeHandler = () => {\n    setIsLogin((prevState) => !prevState);\n  };\n\n  const submitHandler =(event)=>{\n    event.preventDefault();\n    const enteredEmail =emailInputRef.current.value;\n    const enteredPassword = passwordInputRef.current.value;\n\n  setIsLoading(true);\n  let url;\n\n  if (isLogin) {\n    url = 'https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyDVumzBi9pham3Oy5EyGdMpUhjY0sY1Lng'\n\n\n  } else {\n    url= 'https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyDVumzBi9pham3Oy5EyGdMpUhjY0sY1Lng'\n  }\n  fetch(url, {\n    method: 'POST',\n    body: JSON.stringify({\n      email: enteredEmail,\n      password: enteredPassword,\n      returnSecureToken: true,\n    }),\n    headers: {\n      'Content-Type': 'application/json',\n    },\n  })\n    .then((res) => {\n      setIsLoading(false);\n      if (res.ok) {\n        return res.json();\n      } else {\n        return res.json().then((data) => {\n          let errorMessage = 'Authentication failed!';\n           if (data && data.error && data.error.message) {\n            errorMessage = data.error.message;\n           }\n\n          throw new Error(errorMessage);\n        });\n      }\n    })\n    .then((data) => {\n      const expirationTime = new Date(new Date().getTime() + (+data.expiresIn *1000));\n      authCtx.login(data.idToken, expirationTime);\n      history.replace('/');\n    })\n    .catch((err) => {\n      if (err){\n        setError(\n            {\n                title: 'Error!',\n                message: err.message\n            }\n        )\n        return;\n    }\n      //alert(err.message);\n    });\n};\n\n\n  return (\n    <React.Fragment>\n    {error &&< ErrorModal message={error.message} title={error.message} onConfirm={errorHandler}></ErrorModal >}\n    <section className={classes.auth}>\n      <h1>{isLogin ? 'Login' : 'Sign Up'}</h1>\n      <form onSubmit={submitHandler}>\n        <div className={classes.control}>\n          <label htmlFor='email'>Your Email</label>\n          <input type='email' id='email' required ref={emailInputRef}/>\n        </div>\n        <div className={classes.control}>\n          <label htmlFor='password'>Your Password</label>\n          <input type='password' id='password' required ref={passwordInputRef}/>\n        </div>\n        <div className={classes.actions}>\n          {!isLoading && <button>{isLogin ? 'Login' : 'Create Account'}</button>}\n          {isLoading && <p>Sending request...</p>}\n          <button\n            type='button'\n            className={classes.toggle}\n            onClick={switchAuthModeHandler}\n          >\n            {isLogin ? 'Create new account' : 'Login with existing account'}\n          </button>\n        </div>\n      </form>\n    </section>\n    </React.Fragment>\n  );\n};\n\nexport default AuthForm;\n\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}